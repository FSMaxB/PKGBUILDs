pkgname=terasology
pkgver=38   
pkgrel=3
pkgdesc="Yet another high resolution game with blocks like Minecraft!"
arch=('x86_64' 'i686')
license=('Apache')
url="http://blog.movingblocks.net/blockmania"
options=('!strip')
depends=('java-runtime' 'xorg-server-utils' 'openal')
source=( 'terasology' 'terasology.desktop' "http://jenkins.movingblocks.net/job/TerasologyStable/${pkgver}/artifact/build/distributions/Terasology.zip" )
sha512sums=('b85d79b44f327a8645dff1f9f0e4b8832fd8cb9543c828da80ca464be5d55d68a329ba6a5833760ab65dd5b08f14e3a8a62a6e925dd436c04f31f929d0433df5'
            '674d34f54bf7f45f5a83b4dd377475fd323e28f9c98ff93cd64c6f741083f3672e798e3069e92273308a440454f3fd1346b934540307b91f42dce82165a6b035'
            '3a1b1a8844404e47e36e61b47df10f239e9f1e3f3aa1f04ed06e1795bd9e1319b0d42543e6e9234dc029fa6bad27ef9131e91f796a4d12b3711d92bc1ebcc423')

package() {
    install -Dm 755 "$srcdir/terasology" "$pkgdir/usr/bin/terasology"
    install -Dm 644 "$srcdir/terasology.desktop" "$pkgdir/usr/share/applications/terasology.desktop"

    rm "$srcdir/terasology" "$srcdir/terasology.desktop" "$srcdir/Terasology.zip"

    #remove files/dirs for other operating systems
    rm run_macosx.command Terasology.exe
    rm -r natives/{macosx,windows}

    cp -ra "$srcdir" "$pkgdir/usr/share/terasology"
}
