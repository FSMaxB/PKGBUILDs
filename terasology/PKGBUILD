pkgname=terasology
pkgver=39
pkgrel=1
pkgdesc="Yet another high resolution game with blocks like Minecraft!"
arch=('x86_64' 'i686')
license=('Apache')
url="http://terasology.org"
options=('!strip')
depends=('java-runtime' 'xorg-server-utils' 'openal')
#source=( 'terasology' 'terasology.desktop' "http://jenkins.movingblocks.net/job/TerasologyStable/${pkgver}/artifact/build/distributions/Terasology.zip" ) # server is currently down
source=( 'terasology' 'terasology.desktop' "ftp://107.170.146.184/${pkgname}/${pkgver}/Terasology.zip" )
sha512sums=('b85d79b44f327a8645dff1f9f0e4b8832fd8cb9543c828da80ca464be5d55d68a329ba6a5833760ab65dd5b08f14e3a8a62a6e925dd436c04f31f929d0433df5'
            '674d34f54bf7f45f5a83b4dd377475fd323e28f9c98ff93cd64c6f741083f3672e798e3069e92273308a440454f3fd1346b934540307b91f42dce82165a6b035'
            '31dcc8f091b46a9b94284f41337e133a653f3434c0781902d9e3c579456638b7b752a1fe9d1446a79ecdb7b31380773e7726512f5e383d3850947da2bd9a9e17')

package() {
    install -Dm 755 "$srcdir/terasology" "$pkgdir/usr/bin/terasology"
    install -Dm 644 "$srcdir/terasology.desktop" "$pkgdir/usr/share/applications/terasology.desktop"

    rm "$srcdir/terasology" "$srcdir/terasology.desktop" "$srcdir/Terasology.zip"

    #remove files/dirs for other operating systems
    rm run_macosx.command Terasology.exe
    rm -r natives/{macosx,windows}

    cp -ra "$srcdir" "$pkgdir/usr/share/terasology"
}
